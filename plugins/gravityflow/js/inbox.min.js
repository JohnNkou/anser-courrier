!function(i,g){g(document).ready(function(){g(".gravityflow-actions-unlock").click(function(){var i=g(this),o=i.siblings(".gravityflow-actions-lock"),a=i.siblings(".gravityflow-actions-note-field-container"),t=i.siblings(".gravityflow-actions");i.hide(),o.show(),a.hide(),t.hide(),i.parent(".gravityflow-actions").addClass("gravityflow-actions-locked")}),g(".gravityflow-action").click(function(){var o=g(this),a=o.siblings(".gravityflow-actions-unlock"),t=o.siblings(".gravityflow-actions-lock"),i=o.siblings(".gravityflow-actions-note-field-container"),s=i.find("textarea"),n=o.data("note_field");if(!o.hasClass("gravityflow-action-processed")){if(o.parent(".gravityflow-actions").hasClass("gravityflow-actions-locked"))return o.parent(".gravityflow-actions").removeClass("gravityflow-actions-locked"),t.hide(),a.show(),void(n?(i.show(),s.focus(),g(document).keyup(function(i){27==i.keyCode&&a.click()})):setTimeout(function(){o.hasClass("gravityflow-action-processing")||o.hasClass("gravityflow-action-processed")||(o.parent(".gravityflow-actions").addClass("gravityflow-actions-locked"),t.show(),a.hide())},2e3));var e=parseInt(o.data("entry_id")),l=o.data("rest_base"),r=o.data("action"),c=gravityflow_inbox_strings.restUrl,f=gravityflow_inbox_strings.nonce,d=o.siblings(".gravityflow-actions-spinner");g.ajax({method:"POST",url:c+"gf/v2/entries/"+e+"/workflow/"+l,data:{action:r,gravityflow_note:s.val()},beforeSend:function(i){i.setRequestHeader("X-WP-Nonce",f),o.siblings().andSelf().hide(),o.addClass("gravityflow-action-processing"),d.show()},success:function(i){d.hide(),o.removeClass("gravityflow-action-processing"),"success"==i.status?(o.addClass("gravityflow-action-processed"),o.prop("title",i.feedback),o.show(),o.parent(".gravityflow-actions").removeClass("gravityflow-actions-locked")):(o.parent(".gravityflow-actions").addClass("gravityflow-actions-locked"),o.siblings(".gravityflow-action").andSelf().show(),t.show(),alert(i.feedback))},fail:function(i){d.hide(),a.hide(),t.show(),o.removeClass("gravityflow-action-processing"),o.siblings(".gravityflow-actions").andSelf().show(),alert(i)}})}}),gform.addFilter("gform_reset_pre_conditional_logic_field_action",function(i,o,a,t,s){return!1})})}(window.GravityFlowInbox=window.GravityFlowInbox||{},jQuery),handleApprovalStepButtonClick=function(i){document.getElementById("gravityflow_approval_new_status_step").value=i.value,maybeTriggerHandleButtonClick(i)},maybeTriggerHandleButtonClick=function(i){gform&&gform.submission?gform.submission.handleButtonClick(i):i.form.submit()};